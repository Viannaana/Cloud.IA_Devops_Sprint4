# Define quando o pipeline deve ser acionado
trigger:
- main  # O pipeline será acionado quando houver um push na branch 'main'

# Define o pool de agentes a ser utilizado
pool:
  name: 'Default'  # Usando o pool padrão
  options:
    parallel: 0  # Configurando para não permitir execução paralela

# Define as etapas do pipeline
steps:
- script: |
    echo "Setting up Java 11"  # Mensagem de configuração do Java
    sudo apt-get update && sudo apt-get install -y openjdk-11-jdk  # Comando para instalar o Java
    java -version  # Verifica a versão do Java instalado
  displayName: 'Set up JDK 11'

- script: |
    mvn clean install  # Comando Maven para compilar o projeto
  displayName: 'Build with Maven'

- script: |
    mvn test  # Comando Maven para executar os testes
  displayName: 'Run tests'

- script: |
    echo "Build and tests completed successfully!"  # Mensagem de conclusão
  displayName: 'Completion Message'
